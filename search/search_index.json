{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"EPIC Python Package A toolkit for geospatial crop simulations using EPIC model Installation Before starting the setup, ensure you have wget and conda installed. Setup a Virtual environment. (conda Recommended) conda create --name epic_env python=3.9 conda activate epic_env Install the EPIC Python Package pip install git+https://github.com/smarsGroup/EPIC-pkg.git Commands Available Epic_pkg allows you to run various commands. The structure is as show below: epic_pkg {module} {func} -options example usage: epic_pkg workspace new -w Test List of Modules and Functions: workspace new : Create a new workspace with a template structure. prepare : Prepare the input files using config file. run : Execute the simulations. post_process : Process Output files from simulation runs. weather download_daily : Download daily weather data. daily2monthly : Convert daily weather data to monthly. soil process_gdb : Process ssurgo gdb file. sites process_foi : Process fields of interest file. (TODO) generate : Generate site files from processed data. For more details on each command and its options, use: epic_pkg {module} {func} --help","title":"Home"},{"location":"#epic-python-package","text":"A toolkit for geospatial crop simulations using EPIC model","title":"EPIC Python Package"},{"location":"#installation","text":"Before starting the setup, ensure you have wget and conda installed. Setup a Virtual environment. (conda Recommended) conda create --name epic_env python=3.9 conda activate epic_env Install the EPIC Python Package pip install git+https://github.com/smarsGroup/EPIC-pkg.git","title":"Installation"},{"location":"#commands-available","text":"Epic_pkg allows you to run various commands. The structure is as show below: epic_pkg {module} {func} -options example usage: epic_pkg workspace new -w Test","title":"Commands Available"},{"location":"#list-of-modules-and-functions","text":"","title":"List of Modules and Functions:"},{"location":"#workspace","text":"new : Create a new workspace with a template structure. prepare : Prepare the input files using config file. run : Execute the simulations. post_process : Process Output files from simulation runs.","title":"workspace"},{"location":"#weather","text":"download_daily : Download daily weather data. daily2monthly : Convert daily weather data to monthly.","title":"weather"},{"location":"#soil","text":"process_gdb : Process ssurgo gdb file.","title":"soil"},{"location":"#sites","text":"process_foi : Process fields of interest file. (TODO) generate : Generate site files from processed data. For more details on each command and its options, use: epic_pkg {module} {func} --help","title":"sites"},{"location":"OPC/","text":"PhenoCrop OPC refers to the agricultural management practice files. Creating these files is not yet implemented in the pkg. For now, you need to prepare the management files manually and store them in a new folder named 'opc' inside your workspace.","title":"Crop Management Info"},{"location":"OPC/#phenocrop","text":"OPC refers to the agricultural management practice files. Creating these files is not yet implemented in the pkg. For now, you need to prepare the management files manually and store them in a new folder named 'opc' inside your workspace.","title":"PhenoCrop"},{"location":"Soil/","text":"USDA gSSURGO Link: https://www.nrcs.usda.gov/resources/data-and-reports/gridded-soil-survey-geographic-gssurgo-database Creating the soil input files is an important step for the model simulations, please visit the provided link and download the required soil database. For example, if you need the soil files for Maryland, go to the 'State Database-soils' section, powered by Box, and download 'gSSURGO_MD.zip'. After downloading, extract it and place the gdb file in the 'soil' folder in your workspace.","title":"SSURGO Soil"},{"location":"Soil/#usda-gssurgo","text":"Link: https://www.nrcs.usda.gov/resources/data-and-reports/gridded-soil-survey-geographic-gssurgo-database Creating the soil input files is an important step for the model simulations, please visit the provided link and download the required soil database. For example, if you need the soil files for Maryland, go to the 'State Database-soils' section, powered by Box, and download 'gSSURGO_MD.zip'. After downloading, extract it and place the gdb file in the 'soil' folder in your workspace.","title":"USDA gSSURGO"},{"location":"Weather/","text":"Weather Module Weather input files for EPIC model are created from the below listed sources. During the simulations, these weather files are temporarily stored and are automatically deleted once the simulation is complete. They are not stored offline. To get weather info and save them as daily and monthy input files, the following command can be used: epic_pkg weather download_daily Note: This command will only function correctly if you have already set up your workspace, and downloaded the crop-sequence boundaries and croped it to your area of interest.\" Sources DAYMET : https://daymet.ornl.gov/ NLDAS : https://climatedataguide.ucar.edu/climate-data/nldas-north-american-land-data-assimilation-system/","title":"Weather module"},{"location":"Weather/#weather-module","text":"Weather input files for EPIC model are created from the below listed sources. During the simulations, these weather files are temporarily stored and are automatically deleted once the simulation is complete. They are not stored offline. To get weather info and save them as daily and monthy input files, the following command can be used: epic_pkg weather download_daily Note: This command will only function correctly if you have already set up your workspace, and downloaded the crop-sequence boundaries and croped it to your area of interest.\"","title":"Weather Module"},{"location":"Weather/#sources","text":"DAYMET : https://daymet.ornl.gov/ NLDAS : https://climatedataguide.ucar.edu/climate-data/nldas-north-american-land-data-assimilation-system/","title":"Sources"},{"location":"api/","text":"","title":"API"},{"location":"csb/","text":"Crop Sequence Boundaries Visit the following URL: https://www.nass.usda.gov/Research_and_Science/Crop-Sequence-Boundaries/index.php to download the 'Crop Sequence Boundaries 2016-2023' dataset. After downloading, extract the dataset, which includes crop-field shapefiles for the entire USA. You can then clip these shapefiles to fit your Area of Interest (AOI). Example: If your research focuses on Maryland, clip the shapefiles for Maryland and save it. Crop Sequence Boundaries (CSB): Delineated Fields Using Remotely Sensed Crop Rotations . USDA-NASS & Global Conservation Institute. Hunt, K. A., Abernethy, J., Beeson, P., Bowman, M., Wallander, S., & Williams, R. (Year).","title":"Crop Sequence Boundaries"},{"location":"csb/#crop-sequence-boundaries","text":"Visit the following URL: https://www.nass.usda.gov/Research_and_Science/Crop-Sequence-Boundaries/index.php to download the 'Crop Sequence Boundaries 2016-2023' dataset. After downloading, extract the dataset, which includes crop-field shapefiles for the entire USA. You can then clip these shapefiles to fit your Area of Interest (AOI). Example: If your research focuses on Maryland, clip the shapefiles for Maryland and save it. Crop Sequence Boundaries (CSB): Delineated Fields Using Remotely Sensed Crop Rotations . USDA-NASS & Global Conservation Institute. Hunt, K. A., Abernethy, J., Beeson, P., Bowman, M., Wallander, S., & Williams, R. (Year).","title":"Crop Sequence Boundaries"},{"location":"epic/","text":"ENVIRONMENTAL POLICY INTEGRATED CLIMATE MODEL The Environmental Policy Integrated Climate (EPIC) model, originally known as the Erosion/Productivity Impact Calculator, is designed to simulate a field, farm or small watershed, that is homogenous in terms of climate, soil, land use, and topography. EPIC helps in analyzing the effects of management strategies on soil erosion and extends to other aspects of agricultural sustainability like water quality, plant competition, and pest control. Initially developed in the early 1980s, (J. R. Williams, Jones, & Dyke, 1984). EPIC integrated components from previous models such as CREAMS (Knisel, 1980) and SWRRB (J. R. Williams, Nicks, & Arnold, 1985). The model was later enhanced with a pesticide component from GLEAMS (Leonard, 1987) to assess pesticide fate, further developed by Sabbagh, Geleta, Elliott, Williams, & Griggs (1991). EPIC\u2019s capabilities include evaluating management strategies like irrigation, fertilization, crop rotation, and pesticide application. EPIC has evolved to address broader issues such as global climate change impacts, biomass production for energy, and landfill design, making it a versatile tool in environmental and agricultural management. For more details on EPIC model, visit Texas A&M AgriLife site . The EPIC model offers high temporal resolution, simulating agricultural systems on a daily basis over long periods. It features refined algorithms for water quality, nutrient cycling, climate impacts, and atmospheric CO2 effects. This adaptable model evaluates various cropping and management practices to optimize agricultural strategies and calculate erosion costs. For detailed guidance on using EPIC, refer to the user manual: https://epicapex.tamu.edu/media/rckfgmxs/epic1102-user-manual-2024-01-24.pdf","title":"EPIC model"},{"location":"epic/#environmental-policy-integrated-climate-model","text":"The Environmental Policy Integrated Climate (EPIC) model, originally known as the Erosion/Productivity Impact Calculator, is designed to simulate a field, farm or small watershed, that is homogenous in terms of climate, soil, land use, and topography. EPIC helps in analyzing the effects of management strategies on soil erosion and extends to other aspects of agricultural sustainability like water quality, plant competition, and pest control. Initially developed in the early 1980s, (J. R. Williams, Jones, & Dyke, 1984). EPIC integrated components from previous models such as CREAMS (Knisel, 1980) and SWRRB (J. R. Williams, Nicks, & Arnold, 1985). The model was later enhanced with a pesticide component from GLEAMS (Leonard, 1987) to assess pesticide fate, further developed by Sabbagh, Geleta, Elliott, Williams, & Griggs (1991). EPIC\u2019s capabilities include evaluating management strategies like irrigation, fertilization, crop rotation, and pesticide application. EPIC has evolved to address broader issues such as global climate change impacts, biomass production for energy, and landfill design, making it a versatile tool in environmental and agricultural management. For more details on EPIC model, visit Texas A&M AgriLife site . The EPIC model offers high temporal resolution, simulating agricultural systems on a daily basis over long periods. It features refined algorithms for water quality, nutrient cycling, climate impacts, and atmospheric CO2 effects. This adaptable model evaluates various cropping and management practices to optimize agricultural strategies and calculate erosion costs. For detailed guidance on using EPIC, refer to the user manual: https://epicapex.tamu.edu/media/rckfgmxs/epic1102-user-manual-2024-01-24.pdf","title":"ENVIRONMENTAL POLICY INTEGRATED CLIMATE MODEL"},{"location":"runexp/","text":"Run an EPIC Experiment 1. Create new workspace epic_pkg workspace new -w Test cd Test It willl create a new workspace in the new directory named 'Test'. This 'Test' folder will automatically create sub-folders for EPIC model like model, opc, sites, soil, weather and a config.yml doc in it. You need to to go to Test folder before simulation starts. 2. Input data preparation a) For soil: Go to https://www.nrcs.usda.gov/resources/data-and-reports/gridded-soil-survey-geographic-gssurgo-database and download the required soil database. Example: For Maryland, go to State Database-soils|Powered by Box link to download gSSURGO_MD.zip and keep it in soil folder after extarcing it. b) For Weather and sites Go to https://www.nass.usda.gov/Research_and_Science/Crop-Sequence-Boundaries/index.php and Download the Crop Sequence Boundaries 2016-2023 dataset and extract it. This crop sequence boundary contains the crop-field shapefiles for whole USA. You can clip it for your AOI. Like if you are working in Maryland state, just clip it for Maryland and keep it in a new folder named 'CropRotations'. NOTE : Using the crop-sequence boundary, the weather and sites files are automatically downloaded to create input files for AOI, but only the sites files are downloaded offline and stored in the respective folder. Weather files are stored on the server while operating the simulations without offline storage and deleted automatically after simulation. To download weather files automatically, use the following commands: epic_pkg weather download daily This command will only work if you already installed the package, created workspace and downloaded the crop-sequence-boundary. 3. Edit config file as needed Since this package is designed to work for USA-based study regions. In the config.yml file, you need to change the following rows as per your AOI and convenience, but you can adopt the following practice: Let's say you have to run the model for Maryland state of USA, change following rows: a) EXPName: EPIC RUN (Carbon or Nitrogen Assessment) (You can keep anything) Region: Maryland code: MD Fields_of_Interests: ./CropRotations/MDRotFilt.shp Note: This MDRotFilt.shp is the same file we downloaded and kept in the CropRotations folder in the previous step. b) Soil: gdb_path: 4. Before going to editing the ./soil/MD_slopelen_1.csv The thumb-rule is that the config file should be edited considering the code name of the study region. Like you did it here by replacing MD in the config file throughout. 4. Prepare OPC File OPC refers to the agricultural management practice files which is yet to automated. For now, you need to prpare management files and keep it in a new folder named 'OPC' inside the 'Test' directory. 5. Prepare the workspace epic_pkg workspace prepare This command will automatically pre-process the input files before simulation. 6. And execute the simulations epic_pkg workspace run This command will simulate the operation/s and automatically save the results in a new folder named 'Output'. This command will also create a post_process.pynb doc which will have an example code to visualize the required parameters from ACY and DGN files. You can edit this code as per your requirements. You just have to identify the parameters and edit accordingly. Example Visualization 7. Post-process the output visualization You need to post-process the output files according to your interests. Generally, as an agricultural reserachers you need to process the DGN and ACY files. For post-processing epic_pkg workspace post_process This will run the example code post_process.pynb which has been created in the Test folder. It will take a variable called 'YLDG' which denotes the yearly yield in t/ha/yr for all the sites and put it in a sepearte column corresponding to all the site ids with creatinh a yldg.csv file. For visualization epic_pkg workspace visualize It will simply plot the 'YLDG' variable corresponding to the site ids and crate a map for study region. Your plot will look like this:","title":"Quick Start Guide"},{"location":"runexp/#run-an-epic-experiment","text":"","title":"Run an EPIC Experiment"},{"location":"runexp/#1-create-new-workspace","text":"epic_pkg workspace new -w Test cd Test It willl create a new workspace in the new directory named 'Test'. This 'Test' folder will automatically create sub-folders for EPIC model like model, opc, sites, soil, weather and a config.yml doc in it. You need to to go to Test folder before simulation starts.","title":"1. Create new workspace"},{"location":"runexp/#2-input-data-preparation","text":"","title":"2. Input data preparation"},{"location":"runexp/#a-for-soil","text":"Go to https://www.nrcs.usda.gov/resources/data-and-reports/gridded-soil-survey-geographic-gssurgo-database and download the required soil database. Example: For Maryland, go to State Database-soils|Powered by Box link to download gSSURGO_MD.zip and keep it in soil folder after extarcing it.","title":"a) For soil:"},{"location":"runexp/#b-for-weather-and-sites","text":"Go to https://www.nass.usda.gov/Research_and_Science/Crop-Sequence-Boundaries/index.php and Download the Crop Sequence Boundaries 2016-2023 dataset and extract it. This crop sequence boundary contains the crop-field shapefiles for whole USA. You can clip it for your AOI. Like if you are working in Maryland state, just clip it for Maryland and keep it in a new folder named 'CropRotations'. NOTE : Using the crop-sequence boundary, the weather and sites files are automatically downloaded to create input files for AOI, but only the sites files are downloaded offline and stored in the respective folder. Weather files are stored on the server while operating the simulations without offline storage and deleted automatically after simulation. To download weather files automatically, use the following commands: epic_pkg weather download daily This command will only work if you already installed the package, created workspace and downloaded the crop-sequence-boundary.","title":"b) For Weather and sites"},{"location":"runexp/#3-edit-config-file-as-needed","text":"Since this package is designed to work for USA-based study regions. In the config.yml file, you need to change the following rows as per your AOI and convenience, but you can adopt the following practice: Let's say you have to run the model for Maryland state of USA, change following rows: a) EXPName: EPIC RUN (Carbon or Nitrogen Assessment) (You can keep anything) Region: Maryland code: MD Fields_of_Interests: ./CropRotations/MDRotFilt.shp Note: This MDRotFilt.shp is the same file we downloaded and kept in the CropRotations folder in the previous step. b) Soil: gdb_path: 4. Before going to editing the ./soil/MD_slopelen_1.csv The thumb-rule is that the config file should be edited considering the code name of the study region. Like you did it here by replacing MD in the config file throughout.","title":"3. Edit config file as needed"},{"location":"runexp/#4-prepare-opc-file","text":"OPC refers to the agricultural management practice files which is yet to automated. For now, you need to prpare management files and keep it in a new folder named 'OPC' inside the 'Test' directory.","title":"4. Prepare OPC File"},{"location":"runexp/#5-prepare-the-workspace","text":"epic_pkg workspace prepare This command will automatically pre-process the input files before simulation.","title":"5. Prepare the workspace"},{"location":"runexp/#6-and-execute-the-simulations","text":"epic_pkg workspace run This command will simulate the operation/s and automatically save the results in a new folder named 'Output'. This command will also create a post_process.pynb doc which will have an example code to visualize the required parameters from ACY and DGN files. You can edit this code as per your requirements. You just have to identify the parameters and edit accordingly.","title":"6. And execute the simulations"},{"location":"runexp/#example-visualization","text":"","title":"Example Visualization"},{"location":"runexp/#7-post-process-the-output-visualization","text":"You need to post-process the output files according to your interests. Generally, as an agricultural reserachers you need to process the DGN and ACY files.","title":"7. Post-process the output visualization"},{"location":"runexp/#for-post-processing","text":"epic_pkg workspace post_process This will run the example code post_process.pynb which has been created in the Test folder. It will take a variable called 'YLDG' which denotes the yearly yield in t/ha/yr for all the sites and put it in a sepearte column corresponding to all the site ids with creatinh a yldg.csv file.","title":"For post-processing"},{"location":"runexp/#for-visualization","text":"epic_pkg workspace visualize It will simply plot the 'YLDG' variable corresponding to the site ids and crate a map for study region.","title":"For visualization"},{"location":"runexp/#your-plot-will-look-like-this","text":"","title":"Your plot will look like this:"}]}